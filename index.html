<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Reservas Temporarias</title>
<!-- Google APIs + Google Identity Services (GIS) -->
<script async defer src="https://accounts.google.com/gsi/client" onload="onGisLoaded()"></script>
<script async defer src="https://apis.google.com/js/api.js" onload="onGapiLoaded()"></script>
<style>
/*  Mantengo TODO tu CSS original intacto  */
html,body{margin:0;padding:0;font-family:Arial,Helvetica,sans-serif;background:#f5f5f5;color:#333}
.header{display:flex;flex-wrap:wrap;align-items:center;gap:8px;background:#2c3e50;color:#ecf0f1;padding:8px 12px}
.property-btn{background:#34495e;color:#ecf0f1;border:none;padding:4px 10px;border-radius:4px;cursor:pointer;font-size:.9rem}
.property-btn.active{background:#1abc9c}
.action-btn{background:#2980b9;color:#fff;border:none;padding:4px 10px;border-radius:4px;cursor:pointer;font-size:.9rem}
.action-btn.secondary{background:#7f8c8d}.action-btn.danger{background:#c0392b}
.month-nav{margin-left:auto;display:flex;gap:4px;align-items:center}
.month-label{min-width:120px;text-align:center}
main{padding:10px}.check-list{background:#fff;border:1px solid #ddd;border-radius:4px;padding:8px;font-size:.9rem;min-height:60px}
.badge{display:inline-block;padding:2px 4px;font-size:.7rem;border-radius:3px;margin-right:4px}
.badge-success{background:#81c784}.badge-danger{background:#e57373;color:#fff}
.calendar{overflow-x:auto;margin-top:15px}table{border-collapse:collapse;width:100%;table-layout:fixed}
th,td{border:1px solid #ddd;padding:2px;vertical-align:top;font-size:.7rem;height:85px}
th:nth-child(1){background:#f28c8c;color:#fff}
th:nth-child(2){background:#e7b97d;color:#fff}
th:nth-child(3){background:#cfe3a1}
th:nth-child(4){background:#f1e9a1}
th:nth-child(5){background:#a0c1e8}
th:nth-child(6){background:#b79ddb;color:#fff}
th:nth-child(7){background:#cc8bc7;color:#fff}
.date-number{font-weight:bold;font-size:.8rem}.event{display:block;margin-top:2px;padding:1px 2px;border-radius:3px;line-height:1.1;word-break:break-word}
.status-pending{background:#ffe082}.status-paid{background:#81c784}.status-cancelled{background:#e57373;color:#fff;text-decoration:line-through}
.hidden{display:none !important}
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:1000}
.modal-content{background:#fff;padding:18px;border-radius:6px;width:90%;max-width:600px;max-height:90vh;overflow:auto}.modal-content h2{margin-top:0}
.reservation-form{display:flex;flex-direction:column;gap:8px}
.reservation-form input,.reservation-form select{padding:6px;border:1px solid #ccc;border-radius:4px;font-size:.9rem}
.modal-actions{display:flex;justify-content:flex-end;gap:8px;margin-top:10px}
</style>
</head>
<body>
<!-- === HEADER === -->
<header class="header">
  <button class="property-btn active" id="btnBeltran4" onclick="switchCalendar('beltran4')">Beltr√°n 4¬∫</button>
  <button class="property-btn" id="btnBeltran8" onclick="switchCalendar('beltran8')">Beltr√°n 8¬∫</button>
  <button class="property-btn" id="btnDirectorio8" onclick="switchCalendar('directorio8')">Directorio 8¬∫</button>

  <div class="month-nav">
    <button class="action-btn secondary" onclick="changeMonth(-1)">¬´</button>
    <span id="monthLabel" class="month-label"></span>
    <button class="action-btn secondary" onclick="changeMonth(1)">¬ª</button>
  </div>

  <button class="action-btn" onclick="openModal()">A√±adir reserva</button>
  <button id="authBtn" class="action-btn secondary" onclick="handleAuthClick()" disabled>Iniciar sesi√≥n Google</button>
  <button id="signoutBtn" class="action-btn secondary hidden" onclick="handleSignoutClick()">Cerrar sesi√≥n</button>
</header>

<!-- === MAIN (igual que antes) === -->
<main>
  <h3>Check-ins / Check-outs</h3>
  <div id="checkList" class="check-list"></div>
  <div class="calendar">
    <div id="cal-beltran4"></div>
    <div id="cal-beltran8" class="hidden"></div>
    <div id="cal-directorio8" class="hidden"></div>
  </div>
</main>

<!-- === FOOTER === -->
<footer style="text-align:right;padding:8px">
  <button class="action-btn" onclick="exportData()">Exportar CSV</button>
</footer>

<!-- === MODAL (sin cambios) === -->
<div id="modalOverlay" class="modal-overlay hidden">‚Ä¶ (contenido id√©ntico al tuyo) ‚Ä¶</div>

<!-- =================  JS  ================= -->
<script>
/***** üîë Configuraci√≥n Google ******/
const CLIENT_ID='698390297082-afegco16qaslcs1va27jk1bt8davfu9k.apps.googleusercontent.com';
const API_KEY='AIzaSyBhdQaa0zSGFnZclfl6ZQQsrPi3GXeBrrw';
const FILE_ID='1sJoANbvCHafpR5VRVmIC1kUCZfWpQcrP';
const SCOPES='https://www.googleapis.com/auth/drive';
const DISCOVERY_DOCS=['https://www.googleapis.com/discovery/v1/apis/drive/v3/rest'];

let gapiReady=false,gisReady=false,tokenClient;
function onGapiLoaded(){gapi.load('client',async()=>{await gapi.client.init({apiKey:API_KEY,discoveryDocs:DISCOVERY_DOCS});gapiReady=true;enableAuth();});}
function onGisLoaded(){tokenClient=google.accounts.oauth2.initTokenClient({client_id:CLIENT_ID,scope:SCOPES,ux_mode:'popup',callback:token=>{if(token.error){console.error(token);return;}gapi.client.setToken(token);updateSigninUI(true);loadReservaData();}});gisReady=true;enableAuth();}
function enableAuth(){if(gapiReady&&gisReady)document.getElementById('authBtn').disabled=false;}
function handleAuthClick(){tokenClient.requestAccessToken({prompt:''});}
function handleSignoutClick(){const t=gapi.client.getToken();if(t)google.accounts.oauth2.revoke(t.access_token,()=>{});gapi.client.setToken('');updateSigninUI(false);}  
function updateSigninUI(signed){document.getElementById('authBtn').classList.toggle('hidden',signed);document.getElementById('signoutBtn').classList.toggle('hidden',!signed);}  
/***** üìÇ  Drive I/O  *****/
let reservas=[];
function loadReservaData(){gapi.client.drive.files.get({fileId:FILE_ID,alt:'media'}).then(r=>{try{reservas=Array.isArray(r.result)?r.result:[];}catch(e){reservas=[];}localStorage.setItem('reservas',JSON.stringify(reservas));renderAll();}).catch(err=>console.error('Leer Drive',err));}
function saveReservaData(){const body=JSON.stringify(reservas);gapi.client.request({path:`/upload/drive/v3/files/${FILE_ID}`,method:'PATCH',params:{uploadType:'media'},body}).then(()=>console.log('Guardado Drive')).catch(err=>console.error('Guardar Drive',err));}

/***** üóìÔ∏è  (tu l√≥gica de reservas abajo intacta) ******/
/* ‚Äî copia aqu√≠ todo tu JS de calendario/modals/export sin cambios ‚Äî */
</script>

<script>
// Copio literalmente tu JS (render, openModal, etc.) tal como lo ten√≠as ‚Äî omitido por espacio.
</script>

</body>
</html>
